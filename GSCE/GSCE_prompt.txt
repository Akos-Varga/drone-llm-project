prompt = """
**Guidelines**
Write a Python script for AirSim drone control.
Break tasks into steps and return only the script—no additional information.
Do not define functions unless explicitly requested.

**APIs**
aw.fly_to([x, y, z]): Move drone to XYZ (NED) at 2 m/s.
aw.get_drone_position(): Get current position [x, y, z].
aw.get_yaw(): Get current yaw in degrees.
aw.set_yaw(yaw_deg): Set yaw angle (°).
aw.takeoff(): Take off and hover.
aw.land(): Land at current position.

**Constraints**
NED: +X = North, +Y = East, +Z = Down.
Yaw: [0°, 360°); 0° = North, 90° = East, 180° = South, 270° = West.
- **North-East** = (North = 0° + East = 90°) / 2 = 45°
- **South-East** = (South = 180° + East = 90°) / 2 = 135°
- **South-West** = (South = 180° + West = 270°) / 2 = 225°
- **North-West** = (North = 0° + West = 270°) / 2 = 315°
Positive yaw = clockwise, negative = counter-clockwise. Normalize if out of bounds.
Cardinal directions: change x or y only.
Use sin/cos only for diagonal movement.
Initial yaw = 0°.

**Examples**

*Example 1*  
Query: "Take off, then face South, fly forward 2 meters, turn to face North, go forward 2 meters, and land."
Answer:  

import math

## Step: Take off
aw.takeoff()

## Step: Face South (180°)
yaw = 180
aw.set_yaw(yaw)

## Step: Fly forward 2 meters
current_position = aw.get_drone_position()
distance = 2
theta = math.radians(yaw)
dx = distance * math.cos(theta)
dy = distance * math.sin(theta)
aw.fly_to([current_position[0] + dx, current_position[1] + dy, current_position[2]])

## Step: Face North (0°)
yaw = 0
aw.set_yaw(yaw)

## Step: Fly forward 2 meters
current_position = aw.get_drone_position()
distance = 2
theta = math.radians(yaw)
dx = distance * math.cos(theta)
dy = distance * math.sin(theta)
aw.fly_to([current_position[0] + dx, current_position[1] + dy, current_position[2]])

## Step: Land
aw.land()

*Example 2*  
Query: "Take off, face South-West, fly 3 meters forward, turn 90° counter-clockwise, fly forward another 4 meters, go down 1 meter then land."  
Answer:  

import math

## Step: Take off
aw.takeoff()

## Step: Face South-West (225°)
yaw = 225
aw.set_yaw(yaw)

## Step: Fly forward 3 meters
current_position = aw.get_drone_position()
distance = 3
theta = math.radians(yaw)
dx = distance * math.cos(theta)
dy = distance * math.sin(theta)
aw.fly_to([current_position[0] + dx, current_position[1] + dy, current_position[2]])

## Step: Turn 90° counter-clockwise (negative turn)
yaw = (yaw - 90) % 360
aw.set_yaw(yaw)

## Step: Fly forward 4 meters
current_position = aw.get_drone_position()
distance = 4
theta = math.radians(yaw)
dx = distance * math.cos(theta)
dy = distance * math.sin(theta)
aw.fly_to([current_position[0] + dx, current_position[1] + dy, current_position[2]])

## Step: Fly down 1 meter (Down = +Z in NED)
current_position = aw.get_drone_position()
aw.fly_to([current_position[0], current_position[1], current_position[2] + 1])

## Step: Land
aw.land()

*Example 3*  
Query: "Take off, turn North-East fly 4 meters in this direction, go up 3 meters, turn 30 degrees clockwise, go forward one meter, land."
Answer:  

import math

## Step: Take off
aw.takeoff()

## Step: Face North-East (45°)
yaw = 45
aw.set_yaw(yaw)

## Step: Fly 4 meters forward
current_position = aw.get_drone_position()
distance = 4
theta = math.radians(yaw)
dx = distance * math.cos(theta)
dy = distance * math.sin(theta)
aw.fly_to([current_position[0] + dx, current_position[1] + dy, current_position[2]])

## Step: Fly up 3 meters (Up = -Z in NED)
current_position = aw.get_drone_position()
aw.fly_to([current_position[0], current_position[1], current_position[2] - 3])

## Step: Turn 30° clockwise (positive turn)
yaw = (yaw + 30) % 360
aw.set_yaw(yaw)

## Step: Fly forward 1 meter
current_position = aw.get_drone_position()
distance = 1
theta = math.radians(yaw)
dx = distance * math.cos(theta)
dy = distance * math.sin(theta)
aw.fly_to([current_position[0] + dx, current_position[1] + dy, current_position[2]])

## Step: Land
aw.land()

**Your task**  
Query: "Take off, turn 45° clockwise, fly 7 meters forward, turn 90° counter-clockwise, fly 2 meters, land."
Answer:
"""

One-example=======================================================================================================================

prompt = """
**Guidelines**
Write a Python script for AirSim drone control.
Break tasks into steps and return only the script—no additional information.
Do not define functions unless explicitly requested.

**APIs**
aw.fly_to([x, y, z]): Move drone to XYZ (NED) at 2 m/s.
aw.get_drone_position(): Get current position [x, y, z].
aw.get_yaw(): Get current yaw in degrees.
aw.set_yaw(yaw_deg): Set yaw angle (°).
aw.takeoff(): Take off and hover.
aw.land(): Land at current position.

**Constraints**
NED: +X = North, +Y = East, +Z = Down.
Yaw: [0°, 360°); 0° = North, 90° = East, 180° = South, 270° = West.
- **North-East** = (North = 0° + East = 90°) / 2 = 45°
- **South-East** = (South = 180° + East = 90°) / 2 = 135°
- **South-West** = (South = 180° + West = 270°) / 2 = 225°
- **North-West** = (North = 0° + West = 270°) / 2 = 315°
Positive yaw = clockwise, negative = counter-clockwise. Normalize if out of bounds.
Cardinal directions: change x or y only.
Use sin/cos only for diagonal movement.
Initial yaw = 0°.

**Examples**
 
Query: "Take off, turn North-East fly 4 meters in this direction, go up 3 meters, turn 30 degrees clockwise, go forward one meter, land."
Answer:  

import math

## Step: Take off
aw.takeoff()

## Step: Face North-East (45°)
yaw = 45
aw.set_yaw(yaw)

## Step: Fly 4 meters forward
current_position = aw.get_drone_position()
distance = 4
theta = math.radians(yaw)
dx = distance * math.cos(theta)
dy = distance * math.sin(theta)
aw.fly_to([current_position[0] + dx, current_position[1] + dy, current_position[2]])

## Step: Fly up 3 meters (Up = -Z in NED)
current_position = aw.get_drone_position()
aw.fly_to([current_position[0], current_position[1], current_position[2] - 3])

## Step: Turn 30° clockwise (positive turn)
yaw = (yaw + 30) % 360
aw.set_yaw(yaw)

## Step: Fly forward 1 meter
current_position = aw.get_drone_position()
distance = 1
theta = math.radians(yaw)
dx = distance * math.cos(theta)
dy = distance * math.sin(theta)
aw.fly_to([current_position[0] + dx, current_position[1] + dy, current_position[2]])

## Step: Land
aw.land()

**Your task**  
Query: "Take off turn 60° counter-clockwise, fly 1 meter, go down 1 meter, then land."
Answer:
"""

Two-drones=============================================================================================================================

def GSCE(model, task):
    prompt = f"""
**Guidelines**
Write a Python script for controlling multiple drones using AirSim.
Break tasks into steps and return only the script—no additional information.
Do not define functions unless explicitly requested.
Comment each step in the code as it is in the example.

**APIs**
aw.fly_to([x, y, z], drone_id): Move the specified drone (drone_id) to XYZ.
aw.get_drone_position(drone_id): Get current position [x, y, z] of the the specified drone (drone_id).
aw.get_yaw(drone_id): Get the current yaw in degrees of the specified drone (drone_id).
aw.set_yaw(yaw_deg, drone_id): Set the yaw angle (°) of the specified drone (drone_id).
aw.takeoff(drone_id): Take off and hover with the specified drone (drone_id).
aw.land(drone_id): Land at current position with the specified drone (drone_id).

**Constraints**
XYZ coordinate system:
+X = North
+Y = East
+Z = Up

Yaw convention:
0° = North
90° = East
180° = South
270° = West
Clockwise = positive yaw
Counter-clockwise = negative yaw
Normalize yaw to [0°, 360°)
Initial yaw = 0°

Diagonal directions:
North-East = 45°
South-East = 135°
South-West = 225°
North-West = 315°

**Example**
 
Query: "Drone 1 takes off, turns North-East, flies 3 meters. Drone 1 goes up 8 meters. Then, Drone 2 takes off, turns South-East, flies 4 meters. Then Drone 1 turns 90° clockwise and flies 2 meters. Both drones go down 1 meter and then forward 2 meters. Then, Drone 2 lands, then Drone 1 lands."
Answer:  

import math

## Step: Drone 1 - Take off
aw.takeoff(drone_id=1)

## Step: Drone 1 - Face North-East (45°)
yaw_1 = 45
aw.set_yaw(yaw_1, drone_id=1)

## Step: Drone 1 - Fly 3 meters forward
current_position_1 = aw.get_drone_position(drone_id=1)
distance_1 = 3
theta_1 = math.radians(yaw_1)
dx_1 = distance_1 * math.cos(theta_1)
dy_1 = distance_1 * math.sin(theta_1)
aw.fly_to([current_position_1[0] + dx_1, current_position_1[1] + dy_1, current_position_1[2]], drone_id=1)

## Step: Drone 1 - Fly up 8 meters (Up = +Z)
current_position_1 = aw.get_drone_position(drone_id=1)
aw.fly_to([current_position_1[0], current_position_1[1], current_position_1[2] + 8], drone_id=1)

## Step: Drone 2 - Take off
aw.takeoff(drone_id=2)

## Step: Drone 2 - Face South-East (135°)
yaw_2 = 135
aw.set_yaw(yaw_2, drone_id=2)

## Step: Drone 2 - Fly 4 meters forward
current_position_2 = aw.get_drone_position(drone_id=2)
distance_2 = 4
theta_2 = math.radians(yaw_2)
dx_2 = distance_2 * math.cos(theta_2)
dy_2 = distance_2 * math.sin(theta_2)
aw.fly_to([current_position_2[0] + dx_2, current_position_2[1] + dy_2, current_position_2[2]], drone_id=2)

## Step: Drone 1 - Turn 90° clockwise (positive turn)
yaw_1 = aw.get_yaw(drone_id=1)
yaw_1 = (yaw_1 + 90) % 360
aw.set_yaw(yaw_1, drone_id=1)

## Step: Drone 1 - Fly 2 meters forward
current_position_1 = aw.get_drone_position(drone_id=1)
distance_1 = 2
theta_1 = math.radians(yaw_1)
dx_1 = distance_1 * math.cos(theta_1)
dy_1 = distance_1 * math.sin(theta_1)
aw.fly_to([current_position_1[0] + dx_1, current_position_1[1] + dy_1, current_position_1[2]], drone_id=1)

## Step: Both drones - Fly down 1 meter (Down = -Z)
current_position_1 = aw.get_drone_position(drone_id=1)
current_position_2 = aw.get_drone_position(drone_id=2)
aw.fly_to([current_position_1[0], current_position_1[1], current_position_1[2] - 1], drone_id=1)
aw.fly_to([current_position_2[0], current_position_2[1], current_position_2[2] - 1], drone_id=2)

## Step: Both drones - Fly forward 2 meters
current_position_1 = aw.get_drone_position(drone_id=1)
current_position_2 = aw.get_drone_position(drone_id=2)
distance = 2
theta_1 = math.radians(yaw_1)
theta_2 = math.radians(yaw_2)
dx_1 = distance * math.cos(theta_1)
dy_1 = distance * math.sin(theta_1)
dx_2 = distance * math.cos(theta_2)
dy_2 = distance * math.sin(theta_2)
aw.fly_to([current_position_1[0] + dx_1, current_position_1[1] + dy_1, current_position_1[2]], drone_id=1)
aw.fly_to([current_position_2[0] + dx_2, current_position_2[1] + dy_2, current_position_2[2]], drone_id=2)

## Step: Land Drone 2
aw.land(drone_id=2)

## Step: Land Drone 1
aw.land(drone_id=1)

**Your task**  
Query: "{task}"

Answer:"""
    
    response = chat(
        model=model,
        messages=[{"role": "user", "content": prompt}],
        stream=False
    )

    return response["message"]["content"]

Two-drones listed==============================================================================================
**Example**
 
Query: "Drone 1: takeoff  
Drone 1: face North-East
Drone 1: fly 3 meters forward
Drone 1: fly up 8 meters  
Drone 2: takeoff  
Drone 2: face South-East
Drone 1: fly 4 meters  forward 
Drone 1: turn 90° clockwise
Drone 1: fly 2 meters forward
Both drones: fly down 1 meter  
Both drones: fly 2 meters forward
Drone 2: land  
Drone 1: land"
Answer:  